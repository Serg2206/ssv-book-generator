# SSVproff Book Generator

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–Ω–∏–≥** –ø–æ–¥ –±—Ä–µ–Ω–¥–æ–º **"SSVproff"**.

[![License: MIT](https://i.ytimg.com/vi/4cgpu9L2AE8/maxresdefault.jpg)
[![Python 3.8+](https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Blue_Python_3.8_Shield_Badge.svg/2560px-Blue_Python_3.8_Shield_Badge.svg.png)

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:
- ‚ú® **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç** —Å –ø–æ–º–æ—â—å—é OpenAI GPT-4 / Anthropic Claude
- üé® **–û–±–ª–æ–∂–∫–∏ –∏ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏** —á–µ—Ä–µ–∑ DALL-E / Stable Diffusion
- üìö **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏** –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö PDF, EPUB, HTML
- üì¶ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã** —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- üî¨ **Open Science workflow** –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω **–ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä–æ–º –°.–í. –°—É—à–∫–æ–≤—ã–º** –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –∏ –Ω–∞—É—á–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–í–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ](#-–≤–∫–ª–∞–¥-–≤-—Ä–∞–∑–≤–∏—Ç–∏–µ)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8 –∏–ª–∏ –≤—ã—à–µ
- pip (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python)
- Git

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/Serg2206/ssv-book-generator.git
cd ssv-book-generator
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# Linux/macOS
python3 -m venv venv
source venv/bin/activate

# Windows
python -m venv venv
venv\Scripts\activate
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ API –∫–ª—é—á–∏:

```env
# OpenAI API (–¥–ª—è GPT-4 –∏ DALL-E)
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è Claude)
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Stability AI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è Stable Diffusion)
STABILITY_API_KEY=your_stability_api_key_here
```

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏–¥–µ—è–º–∏ –∏–ª–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–µ–π –≤ –ø–∞–ø–∫–µ `input/`:

```bash
echo "–í–∞—à–∏ –∏–¥–µ–∏ –¥–ª—è –∫–Ω–∏–≥–∏..." > input/my_ideas.txt
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä:
```bash
# –£–∂–µ –≥–æ—Ç–æ–≤ –≤ input/sample_ideas.txt
```

### 2. –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
python main.py --input_file input/sample_ideas.txt
```

### 3. –° –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

```bash
python main.py --input_file input/my_ideas.txt --config my_custom_config.yaml
```

### 4. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–§–∏–Ω–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `output/` —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```
output/
‚îî‚îÄ‚îÄ My_Book_Title_20241022_123456/
    ‚îú‚îÄ‚îÄ My_Book_Title.pdf          # –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞
    ‚îú‚îÄ‚îÄ README.md                   # –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞
    ‚îú‚îÄ‚îÄ metadata.json               # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ artifacts/                  # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
        ‚îú‚îÄ‚îÄ content.json
        ‚îú‚îÄ‚îÄ book_config.yaml
        ‚îú‚îÄ‚îÄ cover.png
        ‚îú‚îÄ‚îÄ chapters/
        ‚îÇ   ‚îú‚îÄ‚îÄ chapter_01.txt
        ‚îÇ   ‚îî‚îÄ‚îÄ ...
        ‚îî‚îÄ‚îÄ images/
            ‚îú‚îÄ‚îÄ illustration_01.png
            ‚îî‚îÄ‚îÄ ...
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `book_config.yaml`

```yaml
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
project:
  name: "SSVproff Book Generator"
  version: "1.0.0"

# –ü—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
paths:
  input_folder: "./input"
  output_folder: "./output"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–Ω–∏–≥–∏
book:
  title: "–ú–æ—è –∫–Ω–∏–≥–∞"                # –ë—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω –ò–ò
  type: "scientific"                 # scientific, fiction, surgery, oncology
  target_audience: "students"        # doctors, students, patients, general_public
  language: "ru"                     # ru, en, etc.
  genre: "educational"               # educational, review, narrative, textbook

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ò–ò
ai:
  content_provider: "openai_gpt"     # openai_gpt, anthropic_claude
  content_model: "gpt-4o"            # gpt-4o, claude-3-opus-20240229
  image_provider: "placeholder"      # openai_dalle, stable_diffusion, placeholder
  image_model: "dall-e-3"            # dall-e-3, sd_xl_base_1.0
  temperature: 0.7                   # –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (0.0-1.0)

# –ë—Ä–µ–Ω–¥–∏–Ω–≥
branding:
  style: "ssvproff_v1"
  logo_path: "./assets/ssvproff_logo.png"

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
formatting:
  output_format: "pdf"               # pdf, epub, html
  template: "academic"               # academic, medical, fiction, professional

# Open Science
open_science:
  generate_artifacts: true           # –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  generate_readme: true              # –°–æ–∑–¥–∞–≤–∞—Ç—å README –≤ –ø–∞–∫–µ—Ç–µ
```

---

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ù–∞—É—á–Ω–∞—è –∫–Ω–∏–≥–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `templates/examples/scientific_book_config.yaml`

```bash
python main.py \
  --input_file input/research_notes.txt \
  --config templates/examples/scientific_book_config.yaml
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** PDF –∫–Ω–∏–≥–∞ –≤ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–º —Å—Ç–∏–ª–µ

### –ü—Ä–∏–º–µ—Ä 2: –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `templates/examples/medical_book_config.yaml`

```bash
python main.py \
  --input_file input/clinical_guidelines.txt \
  --config templates/examples/medical_book_config.yaml
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –ü—Ä–∏–º–µ—Ä 3: –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–Ω–∏–≥–∞ (EPUB)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `templates/examples/fiction_book_config.yaml`

```bash
python main.py \
  --input_file input/story_ideas.txt \
  --config templates/examples/fiction_book_config.yaml
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** EPUB –∫–Ω–∏–≥–∞ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —Ä–∏–¥–µ—Ä–æ–≤

### –ü—Ä–∏–º–µ—Ä 4: –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º (–æ—Ç–ª–∞–¥–∫–∞)

```bash
python main.py \
  --input_file input/my_ideas.txt \
  --verbose
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ssv-book-generator/
‚îú‚îÄ‚îÄ main.py                          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ modules/                         # –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ ai_content_generator.py     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –ò–ò API
‚îÇ   ‚îú‚îÄ‚îÄ image_generator.py          # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–ª–æ–∂–µ–∫ –∏ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ book_formatter.py           # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ PDF/EPUB/HTML
‚îÇ   ‚îî‚îÄ‚îÄ book_packager.py            # –£–ø–∞–∫–æ–≤–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
‚îú‚îÄ‚îÄ tests/                           # –ú–æ–¥—É–ª—å–Ω—ã–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ templates/                       # –®–∞–±–ª–æ–Ω—ã —Å—Ç–∏–ª–µ–π –∏ –ø—Ä–∏–º–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ styles/                     # CSS –∏ —Å—Ç–∏–ª–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ examples/                   # –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ input/                           # –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ output/                          # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ utils/                           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
```

### –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (Pipeline)

```
[–í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª] 
    ‚Üì
[1. AI Content Generator]
    ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
    ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è
    ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–≥–ª–∞–≤–ª–µ–Ω–∏—è
    ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–ª–∞–≤
    ‚Üì
[2. Image Generator]
    ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–ª–æ–∂–∫–∏
    ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π
    ‚Üì
[3. Book Formatter]
    ‚Üí –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ PDF/EPUB
    ‚Üí –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π
    ‚Üí –í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    ‚Üì
[4. Book Packager]
    ‚Üí –£–ø–∞–∫–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
    ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è README
    ‚Üì
[–§–∏–Ω–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç]
```

### –ú–æ–¥—É–ª–∏

#### 1. `ai_content_generator.py`

**–§—É–Ω–∫—Ü–∏–∏:**
- `load_config(config_path)` - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `generate_content_from_transcript(transcript, config_path)` - –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
- OpenAI GPT (gpt-4o, gpt-3.5-turbo)
- Anthropic Claude (claude-3-opus, claude-3-sonnet)

#### 2. `image_generator.py`

**–§—É–Ω–∫—Ü–∏–∏:**
- `generate_cover(title, book_type, config_path)` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–ª–æ–∂–∫–∏
- `generate_illustrations(content_chunks, config_path)` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
- OpenAI DALL-E 3
- Stability AI (Stable Diffusion XL)
- Placeholder (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

#### 3. `book_formatter.py`

**–§—É–Ω–∫—Ü–∏–∏:**
- `format_to_format_type(content_dict, cover_path, illustrations_paths, config_path)` - –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- PDF (—á–µ—Ä–µ–∑ fpdf2)
- EPUB (—á–µ—Ä–µ–∑ ebooklib)
- HTML (–Ω–∞—Ç–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)

#### 4. `book_packager.py`

**–§—É–Ω–∫—Ü–∏–∏:**
- `create_package(formatted_book_path, content_dict, ...)` - –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- Open Science –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ README

---

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone https://github.com/Serg2206/ssv-book-generator.git
cd ssv-book-generator

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π + dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pre-commit hooks (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
pip install pre-commit
pre-commit install
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É –µ–¥–∏–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

- **ai_content_generator**: –û—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞
- **image_generator**: –û—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **book_formatter**: –û—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **book_packager**: –û—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —É–ø–∞–∫–æ–≤–∫—É

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Python `logging`:

```python
import logging
logger = logging.getLogger(__name__)

logger.info("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")
logger.warning("–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ")
logger.error("–û—à–∏–±–∫–∞")
logger.debug("–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
```

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `book_generator.log`.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç try-except –±–ª–æ–∫–∏ –¥–ª—è graceful degradation:

```python
try:
    result = some_operation()
except SpecificError as e:
    logger.error(f"Specific error: {e}")
    # Fallback –ª–æ–≥–∏–∫–∞
except Exception as e:
    logger.error(f"Unexpected error: {e}", exc_info=True)
    raise
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
pytest
```

### –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞

```bash
pytest --cov=modules --cov-report=html
```

–û—Ç—á—ë—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –≤ `htmlcov/index.html`.

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è AI –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
pytest tests/test_ai_content_generator.py

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/test_integration.py

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest -v

# –° –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º print()
pytest -s
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conftest.py                      # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ test_ai_content_generator.py     # –¢–µ—Å—Ç—ã –¥–ª—è AI –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ test_image_generator.py          # –¢–µ—Å—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ test_book_formatter.py           # –¢–µ—Å—Ç—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ test_book_packager.py            # –¢–µ—Å—Ç—ã –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏
‚îî‚îÄ‚îÄ test_integration.py              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

### –ú–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –¥–ª—è API –≤—ã–∑–æ–≤–æ–≤:

```python
@patch('modules.ai_content_generator._call_ai_model')
def test_generate_content(mock_ai_call):
    mock_ai_call.return_value = "Mocked response"
    # –í–∞—à —Ç–µ—Å—Ç –∑–¥–µ—Å—å
```

---

## ü§ù –í–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞! 

### –ü—Ä–æ—Ü–µ—Å—Å –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **Fork** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ **feature branch** (`git checkout -b feature/AmazingFeature`)
3. **Commit** –≤–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. **Push** –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ **Pull Request**

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

- –°–ª–µ–¥—É–π—Ç–µ [PEP 8](https://pep8.org/) –¥–ª—è Python –∫–æ–¥–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ type hints –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –î–æ–±–∞–≤–ª—è–π—Ç–µ docstrings –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –∫–ª–∞—Å—Å–æ–≤
- –ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –ü—Ä–∏–º–µ—Ä—ã docstrings

```python
def my_function(param1: str, param2: int) -> bool:
    """
    –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.
    
    –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è.
    
    Args:
        param1: –û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
        param2: –û–ø–∏—Å–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
        
    Returns:
        –û–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
        
    Raises:
        ValueError: –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —ç—Ç–∞ –æ—à–∏–±–∫–∞
        
    Examples:
        >>> my_function("test", 42)
        True
    """
    pass
```

### –û—Ç—á—ë—Ç –æ–± –æ—à–∏–±–∫–∞—Ö

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ issues](https://github.com/Serg2206/ssv-book-generator/issues)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π issue —Å:
   - –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
   - –®–∞–≥–∞–º–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –û–∂–∏–¥–∞–µ–º—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
   - –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
   - –í–µ—Ä—Å–∏–µ–π Python –∏ –û–°
   - –õ–æ–≥–∞–º–∏ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

- [OpenAI API Documentation](https://platform.openai.com/docs/api-reference)
- [Anthropic Claude API](https://docs.anthropic.com/claude/reference/getting-started-with-the-api)
- [Stability AI Documentation](https://platform.stability.ai/docs/getting-started)

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

- [fpdf2](https://pyfpdf.github.io/fpdf2/) - PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- [EbookLib](https://github.com/aerkalov/ebooklib) - EPUB –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- [Pillow](https://pillow.readthedocs.io/) - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## üë®‚Äçüî¨ –ê–≤—Ç–æ—Ä

**–ü—Ä–æ—Ñ–µ—Å—Å–æ—Ä –°.–í. –°—É—à–∫–æ–≤**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –∏ –Ω–∞—É—á–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ —Å —Ü–µ–ª—å—é —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.

---

## üåü –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É –∑–∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ
- Open Source —Å–æ–æ–±—â–µ—Å—Ç–≤—É –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- OpenAI –∏ Anthropic –∑–∞ –º–æ—â–Ω—ã–µ –ò–ò –º–æ–¥–µ–ª–∏

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **GitHub**: [Serg2206/ssv-book-generator](https://github.com/Serg2206/ssv-book-generator)
- **Issues**: [GitHub Issues](https://github.com/Serg2206/ssv-book-generator/issues)

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è —Å –ø–æ–º–æ—â—å—é SSVproff Book Generator**


---

## üÜï Version 2.1 - Architecture Improvements

### üì¶ New Infrastructure Modules

–í–µ—Ä—Å–∏—è 2.1 –¥–æ–±–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞:

#### `utils/error_handler.py`
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è**: `SSVBookGeneratorError`, `ValidationError`, `APIError`, `FileProcessingError`
- **–î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@retry_on_error`**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö
- **–î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@handle_api_errors`**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- **Context manager `safe_execute`**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

```python
from utils.error_handler import retry_on_error, APIError

@retry_on_error(max_attempts=3, delay=1.0)
def generate_content(prompt):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç –¥–æ 3 —Ä–∞–∑ –ø—Ä–∏ –æ—à–∏–±–∫–µ
    return ai_client.generate(prompt)
```

#### `utils/logger.py`
- **–¶–≤–µ—Ç–Ω–æ–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
- **JSON –ª–æ–≥–∏**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- **–î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@log_function_call`**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
- **–ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∞–π–ª–∏–Ω–≥

```python
from utils.logger import setup_logger, log_function_call

logger = setup_logger(__name__, log_file="app.log")

@log_function_call()
def process_chapters(chapters):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤, –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    return [process(ch) for ch in chapters]
```

#### `utils/validator.py`
- **Pydantic –º–æ–¥–µ–ª–∏**: `BookMetadata`, `ChapterData`, `BookConfig`
- **–ï–Ω—É–º—ã**: `OutputFormat`, `LogLevel`
- **–í–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**: `validate_file_path()`, `validate_chapters()`
- **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
from utils.validator import BookMetadata, ChapterData, validate_chapters

metadata = BookMetadata(
    title="Medical Guide",
    author="Dr. Smith",
    language="en"
)

chapters = [
    ChapterData(chapter_num=1, title="Intro", content="...")
]
validate_chapters(chapters)  # –ü—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
```

### üöÄ Enhanced Generator Modules

#### `modules/book_generator_v2.py`
**6-—ç—Ç–∞–ø–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:
1. üìñ –ß—Ç–µ–Ω–∏–µ input —Ñ–∞–π–ª–∞
2. üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
3. üìö –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–ª–∞–≤
4. üñºÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
5. üìÑ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
6. üì¶ –£–ø–∞–∫–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å utils**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- Progress bars –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

```python
from modules.book_generator_v2 import BookGeneratorV2

generator = BookGeneratorV2(api_key="your-key")
book = generator.generate(
    input_file="surgical_topics.txt",
    output_dir="output"
)
```

#### `modules/chapter_generator.py`
**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
- `ThreadPoolExecutor` –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥–ª–∞–≤
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤
- Fallback –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- MD5-based –∫–µ—à –∫–ª—é—á–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–µ—à–µ–º (clear, stats)

```python
from modules.chapter_generator import ChapterGenerator

generator = ChapterGenerator(api_key="key")
chapters = generator.generate_chapters_parallel(
    sections=topics,
    max_workers=4,  # 4 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
    use_cache=True  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à
)
```

#### `modules/book_formatter.py` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–£–ª—É—á—à–µ–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `BookMetadata` –∏ `ChapterData`
- Error handling —Å `@handle_api_errors`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PDF, EPUB, HTML

### üß™ Comprehensive Testing

–î–æ–±–∞–≤–ª–µ–Ω—ã pytest —Ç–µ—Å—Ç—ã:
- `tests/test_error_handler.py` (197 —Å—Ç—Ä–æ–∫)
- `tests/test_logger.py` (249 —Å—Ç—Ä–æ–∫)
- `tests/test_validator.py` (293 —Å—Ç—Ä–æ–∫)

**–ü–æ–∫—Ä—ã—Ç–∏–µ**:
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- Integration —Ç–µ—Å—Ç—ã
- Edge cases –∏ error scenarios

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest tests/ -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest tests/ --cov=utils --cov=modules
```

### üìã Updated Dependencies

```
pydantic>=2.0.0      # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
colorama>=0.4.6      # –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥
pytest>=7.4.0        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pytest-cov>=4.1.0    # Coverage reports
```

### üéØ Migration Guide v1.0 ‚Üí v2.1

**–°—Ç–∞—Ä—ã–π –∫–æ–¥ (v1.0)**:
```python
from modules.book_generator import BookGenerator

generator = BookGenerator()
book = generator.generate(input_file)
```

**–ù–æ–≤—ã–π –∫–æ–¥ (v2.1)**:
```python
from modules.book_generator_v2 import BookGeneratorV2
from utils.logger import setup_logger

logger = setup_logger(__name__)

generator = BookGeneratorV2(api_key="key")
book = generator.generate(
    input_file="topics.txt",
    output_dir="output",
    parallel=True,
    use_cache=True
)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ v2.1**:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

---

